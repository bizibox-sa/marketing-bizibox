---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Seo from "../../components/Seo.astro";
import SkipLink from "../../components/ui/SkipLink.astro";
import Header from "../../components/Header.astro";
import Hero from "../../components/sections/Hero.astro";
import Certifications from "../../components/sections/Certifications.astro";
import Statistics from "../../components/sections/Statistics.astro";
import Services from "../../components/sections/Services.astro";
import About from "../../components/sections/About.astro";
import Testimonials from "../../components/sections/Testimonials.astro";
import Contact from "../../components/sections/Contact.astro";
import Faq from "../../components/sections/Faq.astro";
import Footer from "../../components/Footer.astro";

// Import French home page content
import { homePageFr } from "../../content/home.fr";
import {
  getLocalBusinessSchema,
  getFAQPageSchema,
  getServicesSchema,
  getWebSiteSchema,
  getBreadcrumbListSchema,
} from "../../content/schemas";

// Destructure content for the French home page
const { meta, hero, statistics, services, about, testimonials, contact, faq, footer } = homePageFr;

// JSON-LD schemas for comprehensive structured data optimization
const localBusinessSchema = getLocalBusinessSchema(Astro.site);
const faqPageSchema = getFAQPageSchema(Astro.site, faq.items || []);
const servicesSchema = getServicesSchema(Astro.site, services.items || []);
const webSiteSchema = getWebSiteSchema(Astro.site, "Bizibox - Cybersécurité");
const breadcrumbSchema = getBreadcrumbListSchema(Astro.site, [{ name: "Accueil", url: "/fr" }]);

// Combine all schemas into an array for injection
const combinedSchemas = [
  localBusinessSchema,
  faqPageSchema,
  servicesSchema,
  webSiteSchema,
  breadcrumbSchema,
];
---

<BaseLayout title={meta.title} description={meta.description} themeColor="#000b0f">
  <!-- On-page SEO meta tags with comprehensive JSON-LD schemas -->
  <Seo
    slot="head"
    title={meta.title}
    description={meta.description}
    image="/assets/og/bizibox-og-fr.jpg"
    type="website"
    siteName="Bizibox"
  />

  <!-- Multiple JSON-LD schemas for rich results eligibility -->
  {
    combinedSchemas.map((schema) => (
      <script type="application/ld+json" set:html={JSON.stringify(schema)} slot="head" />
    ))
  }

  <!-- Skip link to main content (accessibility) -->
  <SkipLink />

  <!-- Header with language switcher -->
  <Header />

  <main id="main-content">
    <!-- Hero section with Netlify form -->
    <Hero content={hero} />

    <!-- Certifications section -->
    <Certifications />

    <!-- Services section grid with microdata markup -->
    <Services content={services} />

    <!-- About section -->
    <About content={about} />

    <!-- Statistics section -->
    <Statistics content={statistics} />

    <!-- Testimonials section with carousel and Review microdata -->
    <Testimonials content={testimonials} />

    <!-- Contact section with CTA -->
    <Contact content={contact} />

    <!-- FAQ section with FAQPage microdata -->
    <Faq content={faq} />
  </main>

  <!-- Footer with additional links and information -->
  <Footer content={footer} />
</BaseLayout>
